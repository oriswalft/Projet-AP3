{% extends 'base.html.twig' %}

{% block body %}
    <h1>Filtrage par catégorie</h1>
    
    <form method="get">
        <label for="categories">Catégorie de produit</label>
        <select name="categories" id="categories">
            <option value="">Toutes les catégories</option>
            {% for categorie in categories %}
                <option value="{{ categorie.id }}" {% if categorie.id == app.request.query.get('categories') %}selected{% endif %}>
                    {{ categorie.nom }}
                </option>
            {% endfor %}
        </select>
        <button type="submit">Filtrer</button>
    </form>

    {% if produits %}
        <h2>Résultats du filtrage :</h2>
        <ul>
            {% for produit in produits %}
                <li>{{ produit.description }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>Aucun produit trouvé pour la catégorie sélectionnée.</p>
    {% endif %}
{% endblock %}
